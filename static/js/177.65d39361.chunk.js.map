{"version":3,"file":"static/js/177.65d39361.chunk.js","mappings":"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","sources":["pages/Ideal.js"],"sourcesContent":["import React, { useEffect, lazy } from \"react\";\nimport { useDebugState } from \"use-named-state\";\nimport \"../styles/App.css\";\nimport moment from 'moment-timezone';\nimport { getPermLocale } from \"../components/getLocale\";\nconst Clock = lazy(() => import(\"../components/Clock\"))\n/* eslint-disable react-hooks/exhaustive-deps */\n\nexport default function Ideal() {\n  const [lang, setLang] = useDebugState(\"lang\", \"\")\n  const [allTz, setAllTz] = useDebugState(\"allTz\", [])\n  const [filtVal, setFiltVal] = useDebugState(\"filterValue\", \"\")\n  const [timezones, setTimezones] = useDebugState(\"timezones\", [])\n  const fetchData = (currentLanguage) => {\n    fetch(`https://worldtime-api.vercel.app/ideal?lang=${currentLanguage}`)\n    .then(response => response.json())\n    .then(data => {\n      setAllTz(data)\n      prepareZones(data, filtVal, currentLanguage)\n      setInterval(1000, () => prepareZones(allTz, filtVal, currentLanguage))\n    })\n    .catch(error => console.error(error))\n  } \n  const prepareZones = (data, filterVal = \"\", currentLanguage) => {\n    const myData = data ? data : allTz\n    const unsortedStates = myData.map(tz => {\n      const {country, flag, subdiv = [], cities = [], zone = null, utcOffset = null } = tz\n      const Now = moment().utc().format(\"x\")\n      const offset = zone ? moment().tz(zone).format(\"Z\") : -1 * utcOffset\n      const numericOffset = zone ? -1 * moment.tz.zone(zone).utcOffset(Now) : utcOffset\n      return { country, flag, offset, zone, numericOffset, subdiv, cities }\n    })\n    const sortedStates = unsortedStates.sort((a,b) => (a.numericOffset - b.numericOffset))\n    const timezoneObject = sortedStates.reduce((acc, curr) => {\n      const obj = {...acc}\n      const { flag: code, offset, country: title, numericOffset, subdiv = [], cities = [] } = curr\n      const isOffsetNumeric = typeof offset === 'number'\n      const offsetSign = isOffsetNumeric\n        ? offset === 0\n          ? 'Â±'\n          : offset < 0\n            ? '+'\n            : '-'\n        : null\n      const offsetAbs = isOffsetNumeric\n        ? Math.abs(offset)\n        : null\n      const offsetHours = isOffsetNumeric\n        ? Math.floor(offsetAbs / 60)\n        : null\n      const offsetFormattedHours = isOffsetNumeric\n        ? offsetHours < 10\n          ? `0${offsetHours}`\n          : `${offsetHours}`\n        : null\n      const offsetMinutes = isOffsetNumeric\n        ? offsetAbs % 60\n        : null\n      const offsetFormattedMinutes = isOffsetNumeric\n        ? offsetMinutes < 10\n          ? `0${offsetMinutes}`\n          : `${offsetMinutes}`\n        : null\n      const formattedOffset = isOffsetNumeric\n        ? `UTC${offsetSign}${offsetFormattedHours}:${offsetFormattedMinutes}`\n        : `UTC${offset}`\n      const city = formattedOffset\n      const flag = { code, title, subdiv }\n      if (obj.hasOwnProperty(city)) {\n        obj[city].flags.push(flag)\n        obj[city].cities = obj[city].cities.concat(cities)\n      } else {\n        obj[city] = { city, numericOffset, flags: [flag], cities }\n      }\n      return obj\n    }, {})\n    const timezoneArray = Object.values(timezoneObject).sort((a,b) => (a.numericOffset - b.numericOffset))\n    const filterValue = filterVal ? filterVal : filtVal\n    const filteredStates = filterValue !== \"\"  ? timezoneArray.filter(tz => {\n      const { flags, cities } = tz\n      const filteredFlags = flags.filter(flag => {\n        const { title: country, subdiv = [] } = flag\n        const title = subdiv.length > 0 ? `${country}: ${subdiv.map(item => item.title).join(\", \")}` : country\n        if(filterValue !== \"\"){\n          if(title.toLowerCase().includes(filterValue.toLowerCase())) return true\n          return false\n        }\n        return true\n      })\n      if(filteredFlags.length > 0) return true\n      const filteredCities = cities.filter(city => city.asciiname.toLowerCase().includes(filterValue.toLowerCase()))\n      if(filteredCities.length > 0) return true\n      return false\n    }) : timezoneArray\n    setTimezones(filteredStates)\n  }\n  useEffect(() => {\n    const currentLanguage = window.navigator.language.substring(0,2).toLowerCase()\n    setLang(currentLanguage)\n    fetchData(currentLanguage)\n  }, [])\n  return (\n    <div className=\"app\">\n      <div style={{ textAlign: \"center\", marginBottom: \"24px\", marginTop: \"24px\" }}>\n        <input type=\"text\" placeholder={getPermLocale(\"FilterCountries\")} onChange={(e) => {\n          setFiltVal(e.target.value)\n          prepareZones(allTz, e.target.value, lang)\n          }} />\n      </div>\n      <div className=\"row album sk-album\"> \n      {timezones && timezones.length > 0 && timezones.map((time, index) => <Clock key={index} flags={time.flags} city={time.city} zone={time.zone} offset={time.numericOffset} cities={time.cities} />)}\n      </div>\n    </div>\n  );\n}\n"],"names":["Clock","lazy","Ideal","lang","setLang","useDebugState","allTz","setAllTz","filtVal","setFiltVal","timezones","setTimezones","prepareZones","data","filterVal","arguments","length","undefined","timezoneObject","map","tz","country","flag","subdiv","cities","zone","utcOffset","Now","moment","utc","format","offset","numericOffset","sort","a","b","reduce","acc","curr","obj","code","title","isOffsetNumeric","offsetSign","offsetAbs","Math","abs","offsetHours","floor","offsetFormattedHours","concat","offsetMinutes","offsetFormattedMinutes","city","hasOwnProperty","flags","push","timezoneArray","Object","values","filterValue","filteredStates","filter","item","join","toLowerCase","includes","asciiname","useEffect","currentLanguage","window","navigator","language","substring","fetch","then","response","json","setInterval","catch","error","console","fetchData","_jsxs","className","children","_jsx","style","textAlign","marginBottom","marginTop","type","placeholder","getPermLocale","onChange","e","target","value","time","index"],"sourceRoot":""}